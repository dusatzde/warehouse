<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:util="http://codingcrayons.com/jformbuilder"
	xmlns:p="http://primefaces.org/ui" template="./templates/layout.xhtml">

	<ui:param name="title" value="Log In or Register" />

	<ui:define name="menu"></ui:define>

	<ui:define name="content">
		<h:outputStylesheet name="css/login.css" />
		<hr />

		<div id="form-content">
			<div id="login-form">
				<h1>Log In</h1>
				<br />
				<h:form id="login" prependId="false"
					onsubmit="document.#{p:component('login')}.action='j_security_check';">
					<h:outputLabel value="Email:" for="j_username" styleClass="name" />
					<p:inputText id="j_username" styleClass="form-text-field" />
					<br />
					<h:outputLabel value="Password:" for="j_password" styleClass="name" />
					<p:password id="j_password" styleClass="form-text-field" />
					<br />
					<p:commandButton styleClass="login-button" ajax="false" type="submit" value="Log In" />
				</h:form>
				<br /> <br /> <br />
				<h3 style="color: red">
					<h:outputText value="Incorect username or password."
						rendered="#{param['successful'] eq 'no' }" />
				</h3>

			</div>
			<div id="registration-form">
				<h:form >
					<h1>or Register.</h1>
					<span class="message">
						<p:message for="registration-button" />
					</span>
					
					<br />
				
					<util:ui instance="#{registration.userEntity}" prefix="us1" edit="true" layout="one-column-layout.xhtml" entity="cz.cvut.warehouse.model.UserEntity" />
					<br />
					<h3>Address</h3>
					<br />
					<util:ui instance="#{registration.userEntity.address}" prefix="ad1" edit="true" layout="one-column-layout.xhtml" entity="cz.cvut.warehouse.model.Address" />
							 
					<p:commandButton 	id="registration-button"
										action="#{registration.registerCustomer()}" 
										styleClass="register-button"
										value="Register"  
										ajax="false"
										binding="#{registration.registerButton}" />
				</h:form>
			</div>
		</div>
	</ui:define>
</ui:composition>
